# SyncHub 目录文件同步 - 用户操作手册

> **版本**: 1.59  
> **更新日期**: 2026-01-03
> 
> **下载地址**: https://github.com/eckalhub/SyncHub/releases
<img width="1822" height="867" alt="image" src="https://github.com/user-attachments/assets/248fc65b-24d3-4e1c-9af9-9be37931e72f" />

---

## 目录

1. [产品简介](#1-产品简介)
2. [快速开始](#2-快速开始)
3. [界面说明](#3-界面说明)
4. [功能详解](#4-功能详解)
5. [配置指南](#5-配置指南)
6. [常见问题](#6-常见问题)

---

## 1. 产品简介

**SyncHub** 是一款 Windows 桌面应用程序，用于在本地目录或网络共享目录间进行文件同步。支持三种同步模式、灵活的过滤规则、定时执行、实时监控和多条目管理。

### 主要特性

- ✅ **三种同步模式**：覆盖同步、增量同步、镜像克隆
- ✅ **三个目标目录**：同时同步到最多3个目标位置
- ✅ **灵活过滤规则**：支持通配符排除文件/目录
- ✅ **定时自动执行**：固定时间、间隔执行或执行一次
- ✅ **实时文件监控**：文件变化即时同步（可选）
- ✅ **多条目管理**：同时管理多个同步任务
- ✅ **UNC路径支持**：支持网络共享路径（如 `\\192.168.1.1\share`）
- ✅ **系统托盘**：最小化到托盘，后台运行
- ✅ **开机自启**：随 Windows 启动

---

## 2. 快速开始

### 2.1 创建第一个同步任务

1. 启动 SyncHub 程序
2. 在左侧条目列表区域**右键** → 选择**"添加条目"**
3. 输入条目名称（如："我的文档备份"）
4. 选择同步模式（建议新手选择 **B-增量同步**）
5. 点击**确定**

### 2.2 配置同步源和目标

1. 在左侧列表中**单击**刚创建的条目
2. 在右侧**"源目录/文件"**文本框中输入要同步的路径，每行一个：
   ```
   C:\Users\用户名\Documents
   D:\工作文件
   ```
3. 在**"目标目录"**输入框中输入备份目标路径：
   - **目标1**（必填）：主备份位置
   - **目标2**（可选）：第二备份位置
   - **目标3**（可选）：第三备份位置
4. 配置会**自动保存**

### 2.3 手动执行同步

- **双击**左侧的条目 → 确认对话框中点击**"是"** → 开始同步
- 或者：**右键**条目 → 选择**"立刻同步"**

---

## 3. 界面说明

SyncHub 界面由以下 7 个模块组成：

```
┌─────────────────────────────────────────────────────────────┐
│  SyncHub超级同步 V1.59                             [─][□][×]│
├─────────────┬───────────────────────────────────────────────┤
│             │  模块2: 源目录配置   │  模块3: 过滤规则配置   │
│             │  (左右对半)          │  (左右对半)            │
│  模块1:     ├───────────────────────────────────────────────┤
│  条目列表   │  模块3: 过滤规则配置                          │
│             ├─────────────────┬─────────────┬───────────────┤
│             │  目标1:         │  目标2:     │  目标3:       │
│             ├─────────────────┴─────────────┴───────────────┤
│             │  模块5: 定时计划配置                          │
│             ├───────────────────────────────────────────────┤
│             │  模块6: 日志显示区                            │
├─────────────┴───────────────────────────────────────────────┤
│  模块7: ☑开机启动 ☑隐藏启动 ☑托盘图标 日志级别:[▼]        │
└─────────────────────────────────────────────────────────────┘


```

### 模块1: 条目列表

| 列名 | 说明 |
|------|------|
| 名称 | 同步任务的名称 |
| 锁定 | 🔒 表示已锁定（空白表示未锁定） |
| 模式 | A-覆盖 / B-增量 / C-镜像 |
| 定时 | 定时计划描述 |
| 下次执行 | 下次自动执行的时间 |
| Next任务 | 执行完毕后触发的后续条目名称 (用 `|` 分隔) |
| Last执行状态 | 成功/失败 + 上次执行时间 |

**颜色说明**：
- 🟦 蓝色背景 = 运行中
- 🟩 绿色背景 = 上次执行成功
- 🟥 红色背景 = 上次执行失败

**操作**：
- **单击** = 选中条目，右侧显示其配置
- **双击** = 立即执行该条目的同步任务
- **拖拽** = 上下拖拽调整条目顺序
- **右键** = 添加/修改/删除/立刻同步/停止 + 移动功能

#### 条目排序功能

| 操作 | 说明 |
|------|------|
| **拖拽** | 按住条目上下拖动调整位置 |
| **移动到最上面** | 右键菜单，移动到列表首位 |
| **向上移动** | 右键菜单，向上移动一位 |
| **向下移动** | 右键菜单，向下移动一位 |
| **移动到最下面** | 右键菜单，移动到列表末位 |

#### 锁定条目参数功能

在右键菜单点击"修改条目"时，可以勾选 **"锁定条目参数"** 复选框：

- **锁定后效果**：禁止修改源目录、过滤规则、目标目录和定时计划（防止鼠标误点）
- **列表显示**：锁定的条目在"锁定"列显示 🔒 图标
- **解锁方式**：右键 → 修改条目 → 取消勾选"锁定条目参数"

---

## 4. 功能详解

### 4.1 同步模式

| 模式 | 名称 | 行为 | 适用场景 |
|------|------|------|---------| 
| **A** | 单向覆盖同步 | 直接复制源文件到目标，覆盖同名文件 | 简单备份 |
| **B** | 单向增量同步 | 文件变化时，先备份目标旧文件再复制 | 需要保留历史版本 |
| **C** | 镜像克隆同步 | 完全复制，**删除目标中多余文件** | 完全镜像，需谨慎 |

> ⚠️ **警告**：模式C会删除目标目录中源目录不存在的文件，请确认后再使用！

### 4.2 路径转换规则

源文件同步到目标时，会保留完整的路径结构：

#### 本地路径

盘符 `:` 会转换为 `_disk`。

**示例**：
- 源文件：`C:\Users\文档\报告.docx`
- 目标目录：`E:\Backup`
- 最终路径：`E:\Backup\C_disk\Users\文档\报告.docx`

#### UNC路径（网络共享）

去除前导 `\\`，服务器名/IP作为第一级目录。

**示例**：
- 源文件：`\\192.168.1.168\folder\子目录\aaa.txt`
- 目标目录：`E:\sync_远程`
- 最终路径：`E:\sync_远程\192.168.3.101\folder\子目录\aaa.txt`

> 📝 服务器名可以是 IP 地址（如 `192.168.3.168`）或主机名（如 `myserver`），处理方式相同。

### 4.3 增量模式备份命名

模式B（增量同步）中，当源文件变化时，会先将目标旧文件重命名备份：

**命名规则**：`原文件名@YYYY-MM-DD_HHMMSS.bak`

**示例**：
- 原文件：`report.docx`
- 备份文件：`report.docx@2026-01-01_143052.bak`

### 4.4 实时文件监控

启用实时监控后，程序会监视源目录的文件变化，当检测到变化时自动触发同步。

- **防抖机制**：默认等待2秒（可配置），避免频繁同步
- **适用场景**：需要即时备份的重要文件

---

## 5. 配置指南

### 5.1 模块2: 源目录/文件配置

在此文本框中输入要同步的源路径，**每行一个**：

```
# 可以是目录
C:\Users\用户名\Documents
D:\工作项目

# 也可以是具体文件
C:\重要文件.xlsx

# 支持网络共享路径
\\192.168.1.100\共享文件夹
```

**支持的路径类型**：
- 本地目录：`C:\path\folder`
- 本地文件：`D:\file.txt`
- 网络共享：`\\Server\Share\folder` 或 `\\192.168.1.1\share`

#### 右键菜单功能

| 功能 | 说明 |
|------|------|
| 复制/粘贴/剪切/全选 | 标准编辑功能 |
| **校验重复** | 检查是否有重复行，可选择剔除 |
| **校验无效目录或文件** | 检查路径是否存在，可选择剔除无效路径 |
| **自动排序** | 按字母顺序排序（大小写不敏感），自动剔除空行 |

### 5.2 模块3: 过滤规则配置

在此文本框中输入要**排除**的规则，**每行一条**：

#### 规则类型说明

| 类型 | 格式 | 示例 | 说明 |
|------|------|------|------|
| 文件名通配符 | `*.扩展名` | `*.tmp` | 排除所有临时文件 |
| 文件名模糊 | `*关键词*.*` | `*backup*.*` | 排除文件名含backup的文件 |
| 目录排除 | `完整路径` | `C:\Temp` | 排除整个目录及子目录 |
| 路径通配符 | `路径\*.扩展名` | `D:\Logs\*.log` | 只排除该目录直接下的文件（不含子目录） |

#### 配置示例

```
# 排除所有临时文件
*.tmp
*.bak
~$*.*

# 排除所有缩略图缓存
Thumbs.db
desktop.ini

# 排除特定目录
C:\Users\用户名\AppData
D:\项目\node_modules

# 排除特定目录下的日志文件（单层匹配）
D:\Logs\*.log
```

#### 右键菜单功能

| 功能 | 说明 |
|------|------|
| 复制/粘贴/剪切/全选 | 标准编辑功能 |
| **校验重复** | 检查是否有重复行，可选择剔除 |
| **自动排序** | 按字母顺序排序（大小写不敏感），自动剔除空行 |

### 5.3 模块4: 目标目录配置

可配置**最多3个**目标目录，程序会依次同步到每个目标：

| 目录 | 说明 |
|------|------|
| **目标1** | 必填，主同步目标 |
| **目标2** | 可选，第二备份位置 |
| **目标3** | 可选，第三备份位置 |

**注意**：
- 目标目录必须有写入权限
- 建议使用专用备份盘或网络存储
- 如果某个目标磁盘空间不足，任务会失败并记录错误日志

### 5.4 模块5: 定时计划配置

#### 定时类型

| 类型 | 说明 |
|------|------|
| 不启用 | 仅手动执行 |
| 循环执行 | 每天/每周/每月的指定时间执行（循环） |
| 间隔执行 | 每隔N秒执行一次（最小3秒） |
| 执行一次 | 在指定时间执行一次后自动停止 |

#### 循环执行示例

- **每天 08:00** → 每天早上8点执行
- **每周一 22:00** → 每周一晚上10点执行
- **每月15日 12:00** → 每月15号中午12点执行

#### 间隔执行示例

- **每隔3600秒** = 每小时执行一次
- **每隔86400秒** = 每天执行一次

#### 执行一次

指定一个具体的时间点（如 `2026-12-31 23:59:59`），程序会在该时间执行一次同步，然后自动将定时类型改为"不启用"。

#### Next任务 (链式同步)

在定时计划下方有一个 **"Next任务"** 只读文本框，用于配置当前条目执行完毕后自动触发的后续条目。

**设置方法**：
1. 点击 "Next任务" 后面的文本框
2. 在弹出的**独立窗口**中勾选要触发的条目（窗口大小可手动调整，程序会自动记住上次的尺寸）
3. 点击"确定"保存

**显示格式**：选中的条目名称用 `|` 分隔显示。

**循环检测**：如果配置了循环依赖（如 A→B→A），保存时会弹出警告提示。

**适用场景**：
- 需要按顺序执行多个同步任务
- 主任务完成后自动触发备份任务

### 5.5 模块6: 日志显示

显示当前选中条目的运行日志。

**标题栏显示**：`运行日志:\logs\{条目名称}\{时间戳}.log`
- 点击日志路径可直接在文件资源管理器中打开日志文件位置

> 💡 **路径提示**：日志中显示的占位符 `(Target1/2/3)` 已被替换为**实际配置的物理路径**，方便您快速定位故障位置。

**日志级别**：
| 级别 | 颜色 | 含义 |
|------|------|------|
| DEBUG | 灰色 | 详细调试信息（显示每个文件处理状态） |
| INFO | 黑色 | 正常运行信息（仅显示摘要） |
| WARN | 橙色 | 警告（不影响运行） |
| ERROR | 红色 | 错误（需要关注） |

> 💡 **提示**：DEBUG 级别会显示每个文件的同步/跳过/删除详情，INFO 级别仅显示汇总信息。
> 
> ⚠️ **注意**：即便在 ERROR 级别下，**文件复制失败 (WARN)** 也会由于其关键性而被强制记录并显示。

### 5.6 模块7: 其他设置

| 选项 | 说明 |
|------|------|
| ☑ 开机自动启动 | 随 Windows 启动自动运行 |
| ☑ 启动时隐藏窗口 | 启动后自动最小化到托盘 |
| ☑ 显示托盘图标 | 在系统托盘显示图标 |
| ☑ 启用实时监控 | 启用后，文件变化时即时同步 |
| 防抖间隔(ms) | 实时监控的防抖等待时间（默认2000ms） |
| 日志级别 | 选择显示的最低日志级别 |

---

## 6. 常见问题

### Q1: 同步时提示"文件被占用"怎么办？

程序会自动重试3次（每次间隔1秒）。如果仍然失败，会跳过该文件并记录警告日志。请关闭正在使用该文件的程序后重试。

### Q2: 如何查看同步了哪些文件？

将日志级别设置为 **DEBUG**，日志中会显示每个文件的同步详情。

### Q3: 镜像模式会删除我的文件吗？

**是的**。模式C（镜像克隆）会删除目标目录中源目录不存在的文件。如果需要保留历史版本，请使用模式B（增量同步）。

### Q4: 支持多大的文件？

程序采用流式处理，理论上支持任意大小的文件。同时支持超过260字符的长路径。

### Q5: 如何完全退出程序？

- 方法1：托盘图标右键 → 点击**"退出"**
- 方法2：主窗口标题栏 × 按钮（如果未隐藏到托盘）

### Q6: 日志文件保存在哪里？

日志保存在程序目录的 `logs` 文件夹中，按条目名称分目录存储：
```
logs/
├── 条目名称1/
│   ├── last.log (当前/最新日志)
│   ├── 2026-01-01_081500.log
│   └── 2026-01-01.log (按日归档)
├── 条目名称2/
│   └── ...
└── app.log  (程序全局日志)
```

日志保留天数可在配置中设置（默认30天）。

### Q7: 如何备份配置？

程序配置保存在程序目录的 `config.json` 文件中，直接复制该文件即可备份。

### Q8: 网络共享路径同步失败怎么办？

1. 检查网络连接是否正常
2. 确认共享路径有读取权限
3. 如果使用 IP 地址，确认目标服务器在线
4. 查看日志中的具体错误信息

### Q9: 目标磁盘空间不足会怎样？

程序在同步开始前会检查目标磁盘空间（至少需要100MB）。如果空间不足，任务会立即失败，并在日志中记录"目标磁盘空间不足"的错误信息。

### Q10: 如何快速清理无效的源路径？

在模块2（源目录/文件配置）中右键 → 选择**"校验无效目录或文件"**，程序会检查每行路径是否存在，并可选择一键剔除所有无效路径。

---

## 技术支持

如有问题，请查看程序日志并提供以下信息：
1. 操作系统版本
2. 程序版本（标题栏显示）
3. 错误截图
4. 相关日志内容（可点击日志路径打开文件位置）

---

**感谢使用 SyncHub！**
